@page "/scopes/dhcpv4/details/{ScopeId}"

@using static Beer.DaAPI.Shared.Requests.DHCPv4ScopeRequests.V1.DHCPv4ScopeAddressPropertyReqest
@using Humanizer

@attribute [Authorize]
@inject DaAPIService _service
@inject IStringLocalizer<DHCPv4ScopeDetailsPage> L
@inject NavigationManager _navManager
@inject ISnackbar _snackBarService

<BeerShowCircularLoadingIndicatorWhileNull Item="_properties" Text="@L["LoadingDetailsMessage"]">
    <MudText Typo="Typo.h4" Color="Color.Primary" Class="mb-4">@String.Format(L["PageTitle"], _properties.Name)</MudText>

    @if (_leases.Any() == false)
    {
        <MudAlert Severity="Severity.Info">@L["NoLeasesFound"]</MudAlert>
    }
    else
    {
        <MudText Typo="Typo.h5" Color="Color.Primary" Class="mb-4">@L["ActiveLeaseHeading"]</MudText>
        <MudGrid>
            @{ Int32 index = 0; }
            @foreach (var item in GetActiveLeases())
            {
                var temp = index++;
                <DHCPv4LeaseView Lease="item" ScopeId="@ScopeId" CancelLease="@( () => CancelLease(GetActiveLeases().ElementAt(temp)))" Class="pa-4 white-text light-green lighten-2" />
            }
        </MudGrid>
        <MudText Typo="Typo.h5" Color="Color.Primary" Class="my-4">@L["PendingLeaseHeading"]</MudText>
        <MudGrid>
            @{ Int32 index = 0; }
            @foreach (var item in GetPendingLeases())
            {
                var temp = index++;
                <DHCPv4LeaseView Lease="item" ScopeId="@ScopeId" CancelLease="@( () => CancelLease(GetPendingLeases().ElementAt(temp)))" Class="pa-4 white-text light-blue lighten-2" />
            }
        </MudGrid>
    }

</BeerShowCircularLoadingIndicatorWhileNull>

@code {

}
